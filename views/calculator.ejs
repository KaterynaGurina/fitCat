<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= title %></title>
    <link rel="stylesheet" href="/styles/main.css">
</head>
<body>
    <div class="container">
        <h1>üßÆ Calorie Calculator</h1>
        <p><a href="/">‚Üê Back to Home</a></p>
        
        <!-- Calculator Form -->
        <form method="POST" action="/calculator">
            <label for="age">Age:</label>
            <input 
                type="number" 
                name="age" 
                id="age" 
                min="15" 
                max="100" 
                required
                placeholder="e.g., 25"
            >
            
            <label for="gender">Gender:</label>
            <select name="gender" id="gender" required>
                <option value="">Select gender...</option>
                <option value="male">Male</option>
                <option value="female">Female</option>
            </select>
            
            <label for="weight">Weight (kg):</label>
            <input 
                type="number" 
                name="weight" 
                id="weight" 
                step="0.1" 
                min="30" 
                max="300" 
                required
                placeholder="e.g., 70"
            >
            
            <label for="height">Height (cm):</label>
            <input 
                type="number" 
                name="height" 
                id="height" 
                min="100" 
                max="250" 
                required
                placeholder="e.g., 175"
            >
            
            <label for="activity">Activity Level:</label>
            <select name="activity" id="activity" required>
                <option value="">Select activity level...</option>
                <option value="sedentary">Sedentary (little/no exercise)</option>
                <option value="light">Lightly Active (1-3 days/week)</option>
                <option value="moderate">Moderately Active (3-5 days/week)</option>
                <option value="active">Very Active (6-7 days/week)</option>
                <option value="very_active">Extra Active (very intense exercise)</option>
            </select>
            
            <button type="submit">Calculate</button>
        </form>
        
        <!-- Results -->
        <% if (results) { %>
            <div class="results">
                <h2>Your Calorie Needs</h2>
                
                <div class="result-item">
                    <h3>Basal Metabolic Rate (BMR)</h3>
                    <p style="font-size: 2rem; color: #667eea; font-weight: bold; margin: 1rem 0;">
                        <%= results.bmr %> calories/day
                    </p>
                    <p style="text-align: left;">This is the number of calories your body burns at rest, just to maintain basic functions like breathing and circulation.</p>
                </div>
                
                <div class="result-item">
                    <h3>Total Daily Energy Expenditure (TDEE)</h3>
                    <p style="font-size: 2rem; color: #667eea; font-weight: bold; margin: 1rem 0;">
                        <%= results.tdee %> calories/day
                    </p>
                    <p style="text-align: left;">This is your total calorie burn including daily activities and exercise. Eat this amount to maintain your current weight.</p>
                </div>
                
                <div class="result-item">
                    <h3>Goals</h3>
                    <p><strong>üîª Weight Loss (deficit):</strong> <%= results.deficit %> calories/day</p>
                    <p><strong>‚öñÔ∏è Maintain Weight:</strong> <%= results.tdee %> calories/day</p>
                    <p><strong>üî∫ Weight Gain (surplus):</strong> <%= results.surplus %> calories/day</p>
                </div>
                
                <div class="result-item">
                    <h3>Recommended Macros (for <%= results.tdee %> cal/day)</h3>
                    <p><strong>Protein:</strong> <%= results.protein %>g (30%)</p>
                    <p><strong>Carbohydrates:</strong> <%= results.carbs %>g (40%)</p>
                    <p><strong>Fat:</strong> <%= results.fat %>g (30%)</p>
                    
                    <p style="margin-top: 1rem; font-size: 0.9rem; color: #666; text-align: left;">
                        <em>These are general recommendations. Adjust based on your specific goals and preferences.</em>
                    </p>
                </div>
                
                <div class="result-item" style="background: #e8f0fe;">
                    <h3>Your Stats</h3>
                    <p><strong>Age:</strong> <%= results.age %> years</p>
                    <p><strong>Gender:</strong> <%= results.gender.charAt(0).toUpperCase() + results.gender.slice(1) %></p>
                    <p><strong>Weight:</strong> <%= results.weight %> kg</p>
                    <p><strong>Height:</strong> <%= results.height %> cm</p>
                    <p><strong>Activity Level:</strong> <%= results.activity.replace('_', ' ').split(' ').map(word => word.charAt(0).toUpperCase() + word.slice(1)).join(' ') %></p>
                </div>
            </div>
        <% } %>
    </div>
</body>
</html>